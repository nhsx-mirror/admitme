{"version":3,"sources":["config.js","img/LogInWith_Original.svg","components/AdmitMe.jsx","utils/util.js","components/LoginCallback.jsx","components/QrCode.jsx","App.js","index.js"],"names":["appConfig","clientId","nhsRootDomain","scope","responseType","redirectUri","window","location","origin","getAuthCode","redirectLink","url","queries","newUrl","i","length","encodeURIComponent","key","value","uriBuilder","href","AdmitMe","className","id","role","width","isPageHeading","onClick","alt","src","loginButton","summaryAppointment","userData","summary","Object","entries","forEach","push","Row","Key","Value","LoginCallback","useState","userInfo","setUserInfo","invokeToken","a","urlParams","URLSearchParams","search","code","get","alert","axios","post","response","data","result","useEffect","QrCode","App","transactional","Container","Logo","ServiceName","exact","path","component","List","ListItem","Copyright","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3252d8f5.chunk.js","sourcesContent":["const origin = window.location.origin\r\n\r\nexport const  appConfig = {\r\n    clientId: 'Admit-me', \r\n    nhsRootDomain: 'https://auth.sandpit.signin.nhs.uk',\r\n    scope: 'openid profile',\r\n    responseType: 'code',\r\n    redirectUri: origin + '/logincallback',\r\n  }","export default __webpack_public_path__ + \"static/media/LogInWith_Original.5e8690c0.svg\";","import React from \"react\";\r\nimport { Container, Row, Col, Label, LedeText, BodyText } from \"nhsuk-react-components\";\r\n\r\nimport { appConfig } from \"../config\";\r\nimport { uriBuilder } from \"../utils/util\";\r\n\r\nimport loginButton from \"../img/LogInWith_Original.svg\";\r\n\r\nconst getAuthCode = () => {\r\n  const redirectLink = uriBuilder(appConfig.nhsRootDomain + \"/authorize\", [\r\n    { key: \"client_id\", value: appConfig.clientId },\r\n    { key: \"scope\", value: appConfig.scope },\r\n    { key: \"response_type\", value: appConfig.responseType },\r\n    { key: \"redirect_uri\", value: appConfig.redirectUri },\r\n  ]);\r\n  window.location.href = redirectLink;\r\n};\r\n\r\nexport default function AdmitMe() {\r\n  return (\r\n    <div>\r\n      <div className=\"nhsuk-width-container\">\r\n        <main className=\"nhsuk-main-wrapper\" id=\"maincontent\" role=\"main\">\r\n          <Container>\r\n            <Row>\r\n              <Col width=\"two-thirds\">\r\n                <Label isPageHeading>Admit Me</Label>\r\n                <LedeText>A proof of concept QR code generation feature on your NHS app.</LedeText>\r\n                <BodyText>Generate QR code to automatically transfer patient demographic data from the NSH app to clinical systems.</BodyText>\r\n                <button id=\"log-in-button\" onClick={() => getAuthCode()}>\r\n                  <img id=\"nhs-login-img\" alt=\"login\" src={loginButton} />\r\n                </button>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export const uriBuilder = (url, queries) => {\r\n  var newUrl = url;\r\n  queries = queries || [];\r\n  for (var i = 0; i < queries.length; i++) {\r\n    newUrl = newUrl + (i === 0 ? \"?\" : \"&\");\r\n    newUrl = newUrl + encodeURIComponent(queries[i].key) + \"=\" + encodeURIComponent(queries[i].value);\r\n  }\r\n  return newUrl;\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Button, SummaryList, Container, Row, Col, Label } from \"nhsuk-react-components\";\r\nimport { appConfig } from \"../config\";\r\n\r\nconst summaryAppointment = (userData) => {\r\n  let summary = [];\r\n  Object.entries(userData).forEach(([key, value]) => {\r\n    summary.push(\r\n      <SummaryList.Row>\r\n        <SummaryList.Key>{key}</SummaryList.Key>\r\n        <SummaryList.Value>{value}</SummaryList.Value>\r\n      </SummaryList.Row>\r\n    );\r\n  });\r\n  return <SummaryList>{summary}</SummaryList>;\r\n};\r\n\r\nconst generateQrCode = () => {\r\n  // to be implemented\r\n  window.location.href = '/qrcode'\r\n\r\n}\r\n\r\nexport default function LoginCallback() {\r\n  const [userInfo, setUserInfo] = useState({\"loading\": \"loading\"});\r\n\r\n  const invokeToken = async () => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const code = urlParams.get(\"code\");\r\n    if (!code) {\r\n      return alert(\"No code found in query\");\r\n    }\r\n    const response = await axios.post(`/userinfo`, { code: code, redirectUri: appConfig.redirectUri });\r\n    setUserInfo(response.data.result);\r\n  };\r\n\r\n  useEffect(() => {\r\n    invokeToken();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"nhsuk-width-container \">\r\n        <main className=\"nhsuk-main-wrapper \" id=\"maincontent\" role=\"main\">\r\n          <Container>\r\n            <Row>\r\n              <Col width=\"two-thirds\">\r\n                <Label isPageHeading>Appointment details</Label>\r\n                {summaryAppointment(userInfo)}\r\n                <Button onClick={() => generateQrCode()}>Generate QR code</Button>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Container, Row, Col, Label } from \"nhsuk-react-components\";\r\n\r\nexport default function QrCode() {\r\n  return (\r\n    <div>\r\n      <div className=\"nhsuk-width-container\">\r\n        <main className=\"nhsuk-main-wrapper\" id=\"maincontent\" role=\"main\">\r\n          <Container>\r\n            <Row>\r\n              <Col width=\"two-thirds\">\r\n                <Label isPageHeading>QR Code</Label>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\n\nimport { Header, Footer } from \"nhsuk-react-components\";\n\nimport AdmitMe from \"./components/AdmitMe\";\nimport LoginCallback from \"./components/LoginCallback\";\nimport QrCode from \"./components/QrCode\";\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Header transactional>\n        <Header.Container>\n          <Header.Logo href=\"/\" />\n          <Header.ServiceName href=\"/\">Admit Me</Header.ServiceName>\n        </Header.Container>\n      </Header>\n      <Switch>\n        <Route exact path=\"/\" component={AdmitMe} />\n        <Route exact path=\"/logincallback\" component={LoginCallback} />\n        <Route exact path=\"/qrcode\" component={QrCode} />\n      </Switch>\n      <Footer>\n        <Footer.List>\n          <Footer.ListItem href=\"/\">Admit Me</Footer.ListItem>\n        </Footer.List>\n        <Footer.Copyright>&copy; Crown copyright</Footer.Copyright>\n      </Footer>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}